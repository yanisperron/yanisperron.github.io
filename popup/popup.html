<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Popup</title>
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css">

</head>

<body>
  <div class="popup">
      <div class="info-container" id="info-container">
          <div class="info-wrapper" id="info-wrapper">
              <p id="name"></p>
              <p id="original"></p>
              <p id="location"></p>
              <p id="description"></p>
          </div>
      </div>
      <div class="image-container" id="image-container">
          <img id="image" src="" alt="Image" />
      </div>
      <div class="navra-container" id="navra-container">
        <div class="navra-info-price" id="navra-info-price">
          <div class="navra-info-wrapper">
            <div class="price-text"></div>
            <div class="ticket-info"></div>
          </div>
        </div>
        <div class="navra-info-length" id="navra-info-length">
          <div class="navra-info-wrapper">
            <p id="length"></p>
          </div>
        </div>
        <div class="navra-info-duration" id="navra-info-duration">
          <div class="navra-info-wrapper">
            <p id="duration"></p>
            <p class="duration-info">en moyenne</p>
          </div>
        </div>
        <div class="navra-info-difficulty" id="navra-info-difficulty">
          <div class="navra-info-wrapper">
            <span class="material-symbols-rounded" id="difficulty-icon"></span>
            <p class="difficulty-info">difficulté</p>
          </div>
        </div>
        <div class="navra-info-cuisine" id="navra-info-cuisine">
          <div class="navra-info-wrapper">
            <p class="cuisine-info">cuisine</p>
            <p id="cuisine"></p>
          </div>
        </div>
        <div class="navra-button-maps" id="navra-button-maps">
          <span class="material-symbols-rounded">directions</span>
        </div>
        <div class="navra-button-website" id="navra-button-website">
          <span class="material-symbols-rounded">language</span>
        </div>
      </div>

  </div>

  <script src="scripts/layout.js"></script>

  <script>

    // Récupérer les données de l'url
    function getURLParameter(name) {
        const params = new URLSearchParams(window.location.search);
        return params.get(name) || '';
    }

    // Inscrire les données dans les variables
    const name = getURLParameter('name') || 'Nom non spécifié';
    const original = getURLParameter('original') || '';
    const region = getURLParameter('region') || '';
    const country = getURLParameter('pays') || 'Pays non spécifié';
    const description = getURLParameter('description') || '';
    const notes = getURLParameter('notes') || '';
    const image = getURLParameter('image') || '';
    const maps = getURLParameter('maps') || '';
    const website = getURLParameter('website') || '';
    const layer = getURLParameter('layer') || '';
    const length = getURLParameter('longueur') || '';
    const duration = getURLParameter('duree') || '';
    const difficulty = getURLParameter('difficulte') || '';
    const price = getURLParameter('prix') || '';
    const cuisine = getURLParameter('cuisine') || '';

    // Fusionner description et notes en un seul texte
    const fullText = description + (notes ? ' <br><span class="notes">' + notes + '</span>' : '');

    requestAnimationFrame(() => {
        document.getElementById('description').innerHTML = fullText;
    });

    // Enregistrer les données dans la console
    console.log('nom:', name);
    console.log('nom original:', original);
    console.log('region:', region);
    console.log('pays:', country);
    console.log('image:', image);
    console.log('description:', description);
    console.log('notes:', notes);
    console.log('calque:', layer);
    console.log('longueur:', length)
    console.log('durée:', duration)
    console.log('difficulté:', difficulty)
    console.log('prix:', price)
    console.log('cuisine:', cuisine)

    document.getElementById('name').textContent = name;
    document.getElementById('original').textContent = original;
    document.getElementById('location').textContent = region ? `${region}, ${country}` : country;
    document.getElementById('image').src = image;
    document.getElementById('length').textContent = length ? `${length} km` : '';
    document.getElementById('cuisine').textContent = cuisine;

  </script>

  <script src="scripts/difficulty.js"></script>
  <script src="scripts/duration.js"></script>
  <script src="scripts/button.js"></script>
  <script src="scripts/encryptURLs.js"></script>
  <script src="scripts/navra.js"></script>

  <!--S'assurer que la mise en page est ajustée à la fin du chargement-->
  <script>

    window.addEventListener('DOMContentLoaded', adjustLayout);
    window.addEventListener('resize', adjustLayout);

  </script>

</body>

</html>
